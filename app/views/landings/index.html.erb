<script type="text/javascript"
src="https://maps.googleapis.com/maps/api/js?key=AIzaSyARk-UZoJMXrtZU1dnuUDXysY1eRUYd6gg"></script>
<script type="text/javascript">
	var MY_MAPTYPE_ID = 'custom_style';

	function initialize() {
		var featureOpts = [{
			"featureType" : "all",
			"stylers" : [{
				"saturation" : 0
			}, {
				"hue" : "#e7ecf0"
			}]
		}, {
			"featureType" : "road",
			"stylers" : [{
				"saturation" : -70
			}]
		}, {
			"featureType" : "transit",
			"stylers" : [{
				"visibility" : "off"
			}]
		}, {
			"featureType" : "poi",
			"stylers" : [{
				"visibility" : "off"
			}]
		}, {
			"featureType" : "water",
			"stylers" : [{
				"visibility" : "simplified"
			}, {
				"saturation" : -60
			}]
		}];
		var mapOptions = {
			disableDefaultUI : true,
			zoom : 13,
			mapTypeControlOptions : {
				mapTypeIds : [google.maps.MapTypeId.ROADMAP, MY_MAPTYPE_ID]
			},
			mapTypeId : MY_MAPTYPE_ID
		};
		var map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
		var styledMapOptions = {
			name : 'Custom Style'
		};

		var customMapType = new google.maps.StyledMapType(featureOpts, styledMapOptions);

		map.mapTypes.set(MY_MAPTYPE_ID, customMapType);

		var locations = [
		  ['Sands Beach', 34.408277, -119.880161],
		  ['Campus Point', 34.40549, -119.844047],
		  ['Deveroux Beach', 34.407625, -119.876266]];

	var marker, i;
	var targetImage = new google.maps.MarkerImage('http://www2.psd100.com/ppp/2013/11/2801/Target-1128011114.png', new google.maps.Size(32, 32), new google.maps.Point(0, 0), new google.maps.Point(16, 16));
	var waveImage = new google.maps.MarkerImage('http://cdn.flaticon.com/png/64/48043.png', new google.maps.Size(64, 64), new google.maps.Point(0, 0), new google.maps.Point(32, 32));

    for (i = 0; i < locations.length; i++) {  
      marker = new google.maps.Marker({
        position: new google.maps.LatLng(locations[i][1], locations[i][2]),
        map: map,
        title: locations[i][0],
        icon:waveImage
      })
      	google.maps.event.addListener(marker, 'click', function() {
      	window.location.href = "/locations";
    });
      }

		// Try to use geolocation
		if (navigator.geolocation) {
			navigator.geolocation.getCurrentPosition(function(position) {
				var pos = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);

				var marker = new google.maps.Marker({
					position : pos,
					map : map,
					icon : targetImage,
					title : 'You are here!'
				});

				map.setCenter(pos);
			}, function() {
				handleNoGeolocation(true);
			});
		} else {
			// Browser doesn't support Geolocation
			handleNoGeolocation(false);
		}
		


	}

	function handleNoGeolocation(errorFlag) {
		if (errorFlag) {
			var content = 'Error: The Geolocation service failed.';
		} else {
			var content = 'Error: Your browser doesn\'t support geolocation.';
		}

		var options = {
			map : map,
			position : new google.maps.LatLng(60, 105),
			content : content
		};

		var infowindow = new google.maps.InfoWindow(options);
		map.setCenter(options.position);
	}


	google.maps.event.addDomListener(window, 'load', initialize); 
</script>

<div id="map-canvas" style="position: absolute; width:70%; height:70%; margin-left: 15%; margin-top: 3%"></div>